<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>重置功能测试用例</title>
    <style>
        body { font-family: 'Microsoft YaHei', sans-serif; margin: 20px; }
        .test-case { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-pass { background-color: #d4edda; border-color: #c3e6cb; }
        .test-fail { background-color: #f8d7da; border-color: #f5c6cb; }
        .test-info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 15px; margin: 5px; border: none; border-radius: 3px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-danger { background-color: #dc3545; color: white; }
        .log { background-color: #f8f9fa; padding: 10px; border-radius: 3px; margin-top: 10px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>重置功能测试用例</h1>
    
    <div class="test-case test-info">
        <h3>测试说明</h3>
        <p>此页面用于测试图像字幕生成器的重置功能。请按照以下步骤进行测试：</p>
        <ol>
            <li>打开主应用页面 (<a href="index.html" target="_blank">index.html</a>)</li>
            <li>上传一张测试图片</li>
            <li>修改各种设置（文字、字体、颜色、布局等）</li>
            <li>点击重置按钮</li>
            <li>验证所有设置是否恢复至初始状态</li>
        </ol>
    </div>

    <div class="test-case">
        <h3>测试用例 1: 基本重置功能</h3>
        <p><strong>测试目标：</strong>验证重置按钮能够正确恢复所有设置至初始状态</p>
        <p><strong>预期结果：</strong></p>
        <ul>
            <li>文字输入框清空</li>
            <li>字体大小恢复为32px</li>
            <li>字体颜色恢复为白色(#ffffff)</li>
            <li>背景类型恢复为颜色</li>
            <li>背景颜色恢复为黑色(#000000)</li>
            <li>背景透明度恢复为75%</li>
            <li>字幕宽度恢复为90%</li>
            <li>底部边距恢复为0px</li>
            <li>行高恢复为140%</li>
            <li>文字对齐方式恢复为居中</li>
            <li>导出格式恢复为PNG</li>
            <li>画布内容被清除并显示默认提示</li>
            <li>上传区域重新显示</li>
        </ul>
        <button class="btn-primary" onclick="runTest1()">运行测试</button>
        <div class="log" id="log1"></div>
    </div>

    <div class="test-case">
        <h3>测试用例 2: 边界条件测试</h3>
        <p><strong>测试目标：</strong>验证重置功能在极端情况下的表现</p>
        <p><strong>测试步骤：</strong></p>
        <ol>
            <li>设置所有参数为最大值</li>
            <li>设置所有参数为最小值</li>
            <li>输入超长文字内容</li>
            <li>上传大尺寸图片</li>
            <li>执行重置操作</li>
        </ol>
        <button class="btn-secondary" onclick="runTest2()">运行测试</button>
        <div class="log" id="log2"></div>
    </div>

    <div class="test-case">
        <h3>测试用例 3: 错误处理测试</h3>
        <p><strong>测试目标：</strong>验证重置功能的错误处理机制</p>
        <p><strong>测试方法：</strong>通过开发者工具模拟各种错误情况</p>
        <button class="btn-danger" onclick="runTest3()">运行测试</button>
        <div class="log" id="log3"></div>
    </div>

    <div class="test-case">
        <h3>测试用例 4: 多次重置测试</h3>
        <p><strong>测试目标：</strong>验证连续多次重置操作的稳定性</p>
        <button class="btn-success" onclick="runTest4()">运行测试</button>
        <div class="log" id="log4"></div>
    </div>

    <script>
        function logToElement(elementId, message) {
            const element = document.getElementById(elementId);
            element.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
        }

        function runTest1() {
            const logId = 'log1';
            logToElement(logId, '开始测试基本重置功能...');
            
            // 这里应该在实际应用中运行测试
            // 由于这是静态测试页面，我们提供测试指导
            
            logToElement(logId, '请按照以下步骤手动测试：');
            logToElement(logId, '1. 打开主应用页面 (index.html)');
            logToElement(logId, '2. 上传测试图片并修改各种设置');
            logToElement(logId, '3. 点击重置按钮');
            logToElement(logId, '4. 验证所有设置是否恢复至初始状态');
            logToElement(logId, '测试完成！');
        }

        function runTest2() {
            const logId = 'log2';
            logToElement(logId, '开始边界条件测试...');
            logToElement(logId, '测试方法：设置极端参数值后执行重置');
            logToElement(logId, '预期结果：重置后所有参数应恢复至默认值');
            logToElement(logId, '测试完成！');
        }

        function runTest3() {
            const logId = 'log3';
            logToElement(logId, '开始错误处理测试...');
            logToElement(logId, '测试方法：通过开发者工具模拟错误');
            logToElement(logId, '1. 打开浏览器开发者工具');
            logToElement(logId, '2. 在控制台中执行：document.getElementById("mainCanvas").remove()');
            logToElement(logId, '3. 尝试点击重置按钮');
            logToElement(logId, '预期结果：应显示友好的错误提示');
            logToElement(logId, '测试完成！');
        }

        function runTest4() {
            const logId = 'log4';
            logToElement(logId, '开始多次重置测试...');
            logToElement(logId, '测试方法：连续点击重置按钮5-10次');
            logToElement(logId, '预期结果：每次重置都应正常工作，无内存泄漏');
            logToElement(logId, '测试完成！');
        }
    </script>
</body>
</html>